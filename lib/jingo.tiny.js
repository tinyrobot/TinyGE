(function(){var c,b,a;jingo={};jingo.init=function(d){if(!d){b.warn("A Jingo initialization was attempted with no configuration specified.");return}if(d.verbosity){var e=jingo.Logger.Level.valueOf(d.verbosity);if(e){b.debug("The Jingo logging verbosity will be set to "+e+".");b.setVerbosity(e)}else{b.warn("The provided logging level identifier, "+d.verbosity+" is not a valid logging level.")}}if(d.repos){jingo.iterators.each(d.repos,function(g,f){b.info("The "+g+" module repository will be set to "+f+".");c.repos[g]=f})}if(d.timeout){b.info("The script loading timeout will be set to "+d.timeout+".");c.timeout=d.timeout}a("jingo.init",["verbosity","repos","timeout"],d)};jingo.declare=function(d){a("jingo.declare",["require","name","as"],d);d.dependencies=d.require;d.body=d.as;c.declare(d.name,d)};jingo.anonymous=function(d){a("jingo.anonymous",["require","exec"],d);d.as=d.exec;delete d.exec;jingo.declare(d)};jingo.Module=function(d){return function(g){var f=this;if(!g){throw new Error("The module's configuration cannot be null.")}if(!(g.dependencies||g.body)){throw new Error("The module's configuration must contain dependencies, a body or both.")}g.body=g.body||function(){};if(typeof g.body!="function"){throw new Error("The module's body must be a function.")}var e=function(h){if(!h||/\/$/.exec(h)){return h}return h+"/"};this.repo=e(g.repo);this.name=g.name||"anonymous-"+d++;this.dependencies=g.dependencies||[];this.body=g.body;this.state=jingo.Module.State.LOADING;this.getUrl=function(){if(typeof f.repo==="undefined"||f.repo===null){return null}return f.repo+f.name.replace(/\./g,"/")+".js"};this.toString=function(){return this.name}}}(0);jingo.Module.State=function(e,d){this.value=e;this.toString=function(){return d}};jingo.Module.State.valueOf=function(d){return jingo.iterators.find(jingo.Module.State,function(e,f){return f.value===(d&&d.toUpperCase())})};jingo.Module.State.LOADING=new jingo.Module.State("LOADING","Loading...");jingo.Module.State.DECLARED=new jingo.Module.State("DECLARED","Declared.");jingo.Module.State.RESOLVED=new jingo.Module.State("RESOLVED","Resolved.");jingo.Manager=function(){var i=jingo.Module.State;var g=jingo.Module;var d={};var k=this;this.repos={main:"scripts"};this.timeout=30000;var l=function(m,o){var n=m.split(":");if(n.length<2){return{repo:o||k.repos.main,name:n[0]}}return{repo:k.repos[n[0]],name:n[1]}};var e=function(m){var n=window;var o=m.toString().split(".");delete o[o.length-1];jingo.iterators.each(o,function(q,p){if(!n[p]){n[p]={}}n=n[p]})};var h=function(n){if(!d[n.name]){b.info("loading module: "+n.name+" from repo "+n.repo+"...");d[n.name]=new g({name:n.name,repo:n.repo,body:function(){}});var o=d[n.name];var m=jingo.dom.create("script",{src:o.getUrl(),type:"text/javascript",charset:"utf-8"});jingo.dom.insertAfter(m,jingo.dom.last("script"));setTimeout(function(){if(o.state===i.LOADING){b.error("The module: "+o.name+" seems to be stuck in "+i.LOADING+" state.  You may want to verify that its resource path: "+o.getUrl()+" is valid.")}},k.timeout)}};var j=function(n){if(n.state!=i.DECLARED){return false}b.debug("checking dependencies for module: "+n+"...");var m=jingo.iterators.every(n.dependencies,function(p,o){o=d[o.name];return o&&o.state==i.RESOLVED});if(m){b.debug("resolving module: "+n+"...");n.state=i.RESOLVED;e(n);n.body();b.info("module: "+n+" resolved.")}return m};var f=function(){b.debug("running update...");var m=false;jingo.iterators.each(d,function(n,o){m=j(o)||m});if(m){f()}};this.declare=function(n,m){m.name=n;var p=new g(m);var o=d[p.name];if(o){o.dependencies=p.dependencies;o.body=p.body}else{o=p;d[o.name]=o}o.state=i.DECLARED;jingo.iterators.each(o.dependencies,function(r,q){q=l(q,o.repo);o.dependencies[r]=q;h(q)});if(j(o)){f()}}};c=new jingo.Manager();jingo.Logger=function(f){var d=jingo.Logger.Level;var e=f||d.WARN;this.setVerbosity=function(g){e=g||e};this.isEnabled=function(g){return e.priority&&g.priority&&g.priority<=e.priority};this.log=function(h,g){if(this.isEnabled(h)&&typeof console!="undefined"){console.log(g)}};this.debug=function(g){this.log(d.DEBUG,g)};this.info=function(g){this.log(d.INFO,g)};this.warn=function(g){this.log(d.WARN,g)};this.error=function(g){this.log(d.ERROR,g)}};jingo.Logger.Level=function(f,e,d){this.value=f;this.priority=e;this.toString=function(){return d}};jingo.Logger.Level.valueOf=function(d){return jingo.iterators.find(jingo.Logger.Level,function(e,f){return f.value===(d&&d.toUpperCase())})};jingo.Logger.Level.DEBUG=new jingo.Logger.Level("DEBUG",4,"Debug");jingo.Logger.Level.INFO=new jingo.Logger.Level("INFO",3,"Info");jingo.Logger.Level.WARN=new jingo.Logger.Level("WARN",2,"Warn");jingo.Logger.Level.ERROR=new jingo.Logger.Level("ERROR",1,"Error");jingo.Logger.Level.OFF=new jingo.Logger.Level("OFF",0,"Off");b=new jingo.Logger();jingo.iterators={each:function(e,f){for(var d in e){if(e.hasOwnProperty(d)){f(d,e[d])}}},every:function(f,d){for(var e in f){if(f.hasOwnProperty(e)){if(!d(e,f[e])){return false}}}return true},find:function(f,d){for(var e in f){if(f.hasOwnProperty(e)){if(d(e,f[e])){return f[e]}}}}};jingo.dom={create:function(f,d){var e=document.createElement(f);jingo.iterators.each(d,function(g,h){e.setAttribute(g,h)});return e},last:function(d){var e=document.getElementsByTagName(d);if(!e.length){return null}return e[e.length-1]},insertAfter:function(d,f){var e=f.parentNode;if(f==e.lastChild){e.appendChild(d)}else{e.insertBefore(d,f.nextSibling)}}};a=function(f,d,e){if(b.isEnabled(jingo.Logger.Level.WARN)){jingo.iterators.each(e,function(h){var g=!jingo.iterators.find(d,function(i,j){return h===j});if(g){b.warn("The unexpected named parameter: "+h+" was passed to the "+f+" function.");delete e[h]}})}}})();